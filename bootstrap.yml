---
- name: bootstrap-script
  hosts: localhost
  connection: local

  vars:
    # pre-install
    ssh_reset: true
    ssh_persist:
     - name: id_ed25519
     - name: id_ed25519.pub

    # utilities
    utils_persist:
      - name: ripgrep
      - name: poetry
      - name: tox

    # languages
    langs_persist:
      - name: nasm
      - name: cmake

    # fonts
    fonts_persist:
     - name: JetBrains Mono Nerd Font
       tap: homebrew/cask-fonts
       cask: font-jetbrains-mono-nerd-font

    # terminal
    oh_my_zsh_install: true

    # editors
    doom_emacs_install: true
    neovim_install: true

    # applications
    apps_persist:
     - cask: alfred
     - cask: chromium
     # - cask: arc-browser
     - cask: spotify
     - cask: whatsapp

    # dock
    dockitems_reset: true
    dockitems_persist:
     - name: Emacs
       path: /Applications/Emacs.app
       pos: 1
     - name: Chromium
       path: /Applications/Chromium.app
       pos: 2
     - name: WhatsApp
       path: /Applications/WhatsApp.app
       pos: 3
     - name: Spotify
       path: /Applications/Spotify.app
       pos: 4

    # post-install
    repos_persist:
      - name: Notes
        git: git@github.com:shaun-moate/notes.git
        path: "{{ lookup('ansible.builtin.env', 'HOME') }}/Notes"
      - name: Work-Notes
        git: git@github.com:shaun-moate/work-notes.git
        path: "{{ lookup('ansible.builtin.env', 'HOME') }}/Work"
      - name: Zettelkasten
        git: git@github.com:shaun-moate/zettelkasten.git
        path: "{{ lookup('ansible.builtin.env', 'HOME') }}/Zettelkasten"
    dotfiles_install: true
    doom_sync: true

  roles:
    - pre-install
    - utils
    - langs
    # TODO look into asdf
    # TODO add lua support
    # TODO add typescript/node support
    # TODO add tmux support
    # TODO add cli support (ie. aws-cli)
    - fonts
    - term
    - editors
    - apps
    - dock
    - post-install
