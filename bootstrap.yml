---
- name: bootstrap-script
  hosts: localhost
  connection: local

  vars:
    # ssh
    ssh_reset: true
    ssh_persist:
     - name: id_ed25519
     - name: id_ed25519.pub

    # fonts
    fonts_persist:
     - name: JetBrains Mono Nerd Font
       cask: homebrew/cask-fonts
       src: font-jetbrains-mono-nerd-font

    # dock
    dockitems_reset: true
    dockitems_persist:
     - name: Emacs
       path: /Applications/Emacs.app
       pos: 1
     - name: Chromium
       path: /Applications/Chromium.app
       pos: 2
     - name: WhatsApp
       path: /Applications/WhatsApp.app
       pos: 3
     - name: Spotify
       path: /Applications/Spotify.app
       pos: 4

  # TODO: consider again tagging strategy
  # TODO: organise roles into structure set out below (editors should contain nvim and emacs set-up)
  roles:
    - ssh
    - fonts

    # Terminal
    - oh-my-zsh
    # TODO add tmux support

    # CLI
    # TODO add aws-cli

    # Databases
    - sqlite

    # Editors
    - neovim
    - emacs

    # Languages
    - assembly
    - cmake
    - python
    # TODO look into asdf
    # TODO add lua support
    # TODO add typescript/node support

    # Utilities
    # - role: arc-browser " requires at least Monterey OS
    - alfred
    - chromium
    - spotify
    - whatsapp
    - dock

    # Clean-up
    - dotfiles
    - repositories
    # TODO: need to review dockutils usage (not consistent behaviour)

    - clean-up
